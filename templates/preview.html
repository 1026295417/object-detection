<!DOCTYPE html>
<html>
   <nav class="navbar is-primary" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
          Home
      </a>
      <a class="navbar-item" href="/images">
          Images
      </a>
      <a class="navbar-item" href="/video_feed">
          Video
      </a>

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
  </nav>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <meta charset="utf-8"/>
    <style>
    .image {
        display: block;
        margin: 2em auto;
        background-color: #444;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    img {
        display: block;
    }
    </style>
    <link rel="stylesheet" href="/static/css/bulma.min.css">
    <link href="/static/css/bulma-calendar.min.css" rel="stylesheet">
    <script src="/static/js/jquery-1.10.2.min.js" charset="utf-8"></script>
    <script src="/static/js/jquery.unveil.js" charset="utf-8"></script>
    <script>
      $(document).ready(function() {
        $('img').unveil();
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="columns">
        <div class="column is-4-desktop is-12-mobile">
          <form method="get" action="/images">
            <div class="field">
              <label class="label">Date</label>
              <div class="control">
                <input type="date" name="date" id="mycal">
              </div>
            </div>
            <div class="field">
              <label class="label">Objects</label>
              <div class="control">
                <div class="select is-multiple">
                  <select name="class" multiple size="{{ objects|length }}">
                    {% for object in objects %}
                    <option value="{{object}}">{{ object }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
            </div>
            <button class="button" type="submit">Search</button>
          </form>
        </div>
      </div>
    </div>
    <div class="columns is-multiline">
      {% for image in images %}
      <div class="column is-4-desktop is-12-mobile">
        <a class="image" href="{{ image.src }}?date={{ image.date.strftime('%Y%m%d_%H%M%S') }}">
          <figure>
            <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="{{ image.src }}?w={{ image.width }}&amp;h={{ image.height }}&amp;date={{ image.date.strftime('%Y%m%d_%H%M%S') }}"  />
            {% if image.date %}
            <figcaption> {{ image.date.strftime('%d %b %-H:%M') }} </figcaption>
            {% endif %}
          </figure>
        </a>
      </div>
      {% endfor %}
    </div>
  </body>
  <script src="/static/js/bulma-calendar.min.js"></script>
  <script>
    // Initialize all input of type date
    var calendars = bulmaCalendar.attach('[type="date"]');

    // To access to bulmaCalendar instance of an element
    var element = document.querySelector('#mycal');
    if (element) {
      // bulmaCalendar instance is available as element.bulmaCalendar
      element.bulmaCalendar.on('select', function(datepicker) {
        console.log("Picker", datepicker.data.value().substr(3,2));
      });
    }
  </script>
</html>
